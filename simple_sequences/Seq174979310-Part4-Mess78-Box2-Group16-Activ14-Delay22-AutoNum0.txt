@startuml
participant oimgle as 0
box "hnkjv"
participant uvxcbs as 1
box "qhxpb"
participant tuwttp as 2
participant gshvyp as 3
end box
end box
0 -// 1: bcyzudevua
3 -> 1: khmtrzenoy
opt vpppbnhsxqrx
...rxddpuyt...
0 -> 0: qusxczqphl
...vyfryzgw...
 [<- 3: jurtcasklb
else gsgoxmomfhfp
opt zlfrftwnnrxv
...rdshlvkk...
 [<- 3: ujtcxektdg
loop smuhlcruakui
...vrbbixty...
0 ->x 1: ehegfnxwbg
...fvwyjkur...
2 ->> 1: scnjdzyzdb
0 <-> 1: lyqvnkmvah
2 <-] : aczvoxrwlw
critical byxyumiqmicr
2 -> 1: uqnmseyuuu
par uigxbhryhucg
...sjuzmyrh...
3 <-> 2: vfbenvxkwi
opt ilupwserzqov
0 --//o 2: allosmkxoy
 [-> 2: jkjhgxaqjq
1 <-] : vxlgccrshi
1 -->x 1: fpjmkqmkeq
alt iggaoedwdmuu
2 ->o 0: pwbssrmcdf
3 -->x 3++ : lkchgoqugw
else imjrxzjflpgw
0 -\\ 1: njyeriuczi
return bvucutodmv
end
...ggbupedq...
 [-> 0: cpdwopubun
else dqhpmedhgahz
2 <-> 1: majqlptrbz
else dnyhorgdwruu
3 ->x 2++ : agaxddexai
else gzpcdrwolojf
opt wyilphanjiag
0 ->x 2++ : ihlpyivdjt
1 -> 2: inuqdfmobs
else vypcntnnaawt
...yayexkfv...
0 -->x 0: pvgxamhmto
return dhlbqtqpfx
0 -> 0: swanoqsicn
return srxnxdbhfj
...ncvujpvv...
2 --> 3: kwctqxdcob
end
...gkkizlhj...
1 -> 1: wvkxoxtnmc
2 ->> 2: ivqdgjwoel
else uiqaieodnqkv
loop asmhdywstopa
...wjdtbpsf...
 [-> 2: bvyfncxtii
3 -// 2++ : qpgzaakgkg
2 -> 0: veyrdtaxkf
return kqiarvzodh
...dgxmmrvh...
0 -> 1!! : xhujebbcyu
 [<- 1: ackjkrrggn
else izanttacqwsx
...qwxqhukb...
2 ->x 1++ : bngxxqschu
loop slpzxwbjjibq
0 <-] : glbqndyrcw
loop jyjfhxdadmek
0 -> 3: gatnnyiult
0 -->x 1: rocwrsjigl
0 -> 0: ntupebuzjk
return yicmvazbmx
else xeskbxcppgaj
3 ->o 2++ : kiihxthekm
else uglhvkxjjqiy
1 -> 1++ : udfxakilyg
0 -> 2: jyxowspdvo
return cshsgeeqwb
opt xsvhwjccanfd
0 ->o 3++ : dqjmaqavxe
0 <-] : gkrlorrxqv
return xtlklgbmzq
0 -> 0++ : yjovuppxwv
critical wypuqelqmcfo
...rxujjprw...
 [-> 2: avhqzabaap
2 -// 0: lgostwhqzv
else phbsbxftupen
...kuyubjdr...
2 ->x 1: iokkdtqcvb
else kucgimivrtab
...aillbawn...
0 -->x 0: renjgcepdg
1 ->x 1: uesnfvyfap
3 ->x 1: nszjozooph
return fgaurdbpfa
else wzkzqkzwcscj
2 -> 2++ : mpczdvmqdq
3 -> 2: tjbiurymop
return oyrtdnwqto
else nzvigyedwqdz
 [-> 3: wyjspcmgel
end
...izwubeov...
2 -> 0: qcmqaidmor
1 ->] : nmcshrbwxp
2 ->] : tmtsvrfcen
return nrfdtdewyq
else xwjtzgnlrizf
2 ->> 1: hnxvmaaiqn
else kmzeizimsrkp
3 -> 3++ : qcrlllojlt
1 -> 2: fkzuntcjbc
 [<- 2: mrlooaunac
return hedliwtcfj
loop pimvhhhcblde
...mxloyomj...
0 -->x 1: roanbbyxpz
 [<- 0: cydsdmcard
...ruirrorx...
1 -> 1++ : lrxjkeiawm
else bmcnogmmlvtx
0 ->x 0: zavvblidio
0 ->o 2: ooaedxsfai
...ckywmlwy...
0 --//o 2: cqfumbhyrf
...ltbhshdy...
2 --> 0: whfgxxhfht
3 -> 3++ : dbbblenlbr
else bwpmiqcpjmni
critical qxgptwtglmrn
0 ->> 1: echoakebik
0 -> 3: oxvxwthczq
return qitgnhmfdh
3 -// 0: frepnbwgqv
else qcadxwrgxlxm
3 -> 2++ : ejmsegdbog
1 ->> 0: cucewcocgm
return rrkxqxsvjt
...pfgcdudw...
0 --//o 3: crkyuptieg
return atzouncmqj
end
2 -> 2: nkxczzdpgm
else idvrgszsubli
2 <-] : zwrjnigklf
loop ibatzxsddapc
0 -> 2: bemwonwrse
2 -> 3: cbmsdejnjj
end
end
end
end
end
end
end
end
end
end
end
end
@enduml